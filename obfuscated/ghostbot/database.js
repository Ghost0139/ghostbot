const a41_0x30f847=a41_0x4584;(function(_0x51fb38,_0x1d544b){const _0x4567fb=a41_0x4584,_0x54a0b6=_0x51fb38();while(!![]){try{const _0x30fc9f=-parseInt(_0x4567fb(0x170))/0x1+-parseInt(_0x4567fb(0x15e))/0x2+parseInt(_0x4567fb(0x174))/0x3*(-parseInt(_0x4567fb(0x157))/0x4)+-parseInt(_0x4567fb(0x172))/0x5*(-parseInt(_0x4567fb(0x167))/0x6)+-parseInt(_0x4567fb(0x15c))/0x7*(parseInt(_0x4567fb(0x150))/0x8)+-parseInt(_0x4567fb(0x178))/0x9+parseInt(_0x4567fb(0x16e))/0xa;if(_0x30fc9f===_0x1d544b)break;else _0x54a0b6['push'](_0x54a0b6['shift']());}catch(_0x401950){_0x54a0b6['push'](_0x54a0b6['shift']());}}}(a41_0x5521,0xac3e3));const a41_0x1e5e9a=(function(){let _0x526d15=!![];return function(_0xa4a034,_0x5ba507){const _0x107175=_0x526d15?function(){const _0x2980cc=a41_0x4584;if(_0x5ba507){const _0x2e1fb7=_0x5ba507[_0x2980cc(0x151)](_0xa4a034,arguments);return _0x5ba507=null,_0x2e1fb7;}}:function(){};return _0x526d15=![],_0x107175;};}()),a41_0x92ff85=a41_0x1e5e9a(this,function(){const _0x399263=a41_0x4584;return a41_0x92ff85[_0x399263(0x177)]()[_0x399263(0x171)](_0x399263(0x162))[_0x399263(0x177)]()[_0x399263(0x156)](a41_0x92ff85)['search'](_0x399263(0x162));});a41_0x92ff85();function a41_0x5521(){const _0xdacbda=['joins','(((.+)+)+)+$','values','Veritabanı\x20yüklenirken\x20hata:','user_stats','open','1356042aOTrMJ','user_id','tickets','join','parse','genel','push','40042140AYCSGH','writeFileSync','661195hUIoRk','search','5HzPZLG','closed','1701yGsOyy','claimed','messages_sent','toString','9725634XyrOpL','punishments','map','exports','now','voice_sessions','Veritabanı\x20kaydedilirken\x20hata:','voice_time','sort','error','1282408pCNDQU','apply','utf8','moderation_logs','status','claimed_by','constructor','772asTrRC','leaves','existsSync','last_updated','stringify','21ckxTQA','length','2385118quveuh','readFileSync','find'];a41_0x5521=function(){return _0xdacbda;};return a41_0x5521();}const fs=require('fs'),path=require('path'),DB_FILE=path[a41_0x30f847(0x16a)](__dirname,'database.json');function a41_0x4584(_0x56ddf7,_0x4c93f5){_0x56ddf7=_0x56ddf7-0x147;const _0xf4fcdc=a41_0x5521();let _0x92ff85=_0xf4fcdc[_0x56ddf7];return _0x92ff85;}let db={'user_stats':{},'moderation_logs':[],'punishments':{},'tickets':{},'voice_sessions':{}};if(fs[a41_0x30f847(0x159)](DB_FILE))try{db=JSON[a41_0x30f847(0x16b)](fs[a41_0x30f847(0x15f)](DB_FILE,a41_0x30f847(0x152)));}catch(a41_0x3d5aee){console[a41_0x30f847(0x14f)](a41_0x30f847(0x164),a41_0x3d5aee);}const saveDB=()=>{const _0x5699a5=a41_0x30f847;try{fs[_0x5699a5(0x16f)](DB_FILE,JSON[_0x5699a5(0x15b)](db,null,0x2));}catch(_0x311622){console[_0x5699a5(0x14f)](_0x5699a5(0x14c),_0x311622);}};module[a41_0x30f847(0x149)]={'getUserStats':async _0x500c8d=>{return db['user_stats'][_0x500c8d]||{'user_id':_0x500c8d,'messages_sent':0x0,'voice_time':0x0,'joins':0x0,'leaves':0x0};},'updateMessageCount':async _0x2f5fcb=>{const _0x2ef902=a41_0x30f847;!db[_0x2ef902(0x165)][_0x2f5fcb]&&(db[_0x2ef902(0x165)][_0x2f5fcb]={'messages_sent':0x0,'voice_time':0x0,'joins':0x0,'leaves':0x0}),db[_0x2ef902(0x165)][_0x2f5fcb][_0x2ef902(0x176)]++,db[_0x2ef902(0x165)][_0x2f5fcb][_0x2ef902(0x15a)]=Date[_0x2ef902(0x14a)](),saveDB();},'startVoiceSession':async(_0x59782e,_0x2cd4e9)=>{const _0x4db37e=a41_0x30f847;db[_0x4db37e(0x14b)][_0x59782e]={'join_time':Date['now'](),'channel_id':_0x2cd4e9},saveDB();},'endVoiceSession':async _0x5a4f27=>{const _0x5c2961=a41_0x30f847,_0x3c3854=db['voice_sessions'][_0x5a4f27];if(_0x3c3854){const _0x40c339=Math['floor']((Date[_0x5c2961(0x14a)]()-_0x3c3854['join_time'])/0x3e8);!db[_0x5c2961(0x165)][_0x5a4f27]&&(db[_0x5c2961(0x165)][_0x5a4f27]={'messages_sent':0x0,'voice_time':0x0,'joins':0x0,'leaves':0x0}),db[_0x5c2961(0x165)][_0x5a4f27]['voice_time']=(db[_0x5c2961(0x165)][_0x5a4f27][_0x5c2961(0x14d)]||0x0)+_0x40c339,db[_0x5c2961(0x165)][_0x5a4f27][_0x5c2961(0x15a)]=Date[_0x5c2961(0x14a)](),delete db[_0x5c2961(0x14b)][_0x5a4f27],saveDB();}},'updateJoinCount':async _0x5b0e04=>{const _0x44b6b3=a41_0x30f847;!db[_0x44b6b3(0x165)][_0x5b0e04]&&(db['user_stats'][_0x5b0e04]={'messages_sent':0x0,'voice_time':0x0,'joins':0x0,'leaves':0x0}),db['user_stats'][_0x5b0e04][_0x44b6b3(0x161)]++,db['user_stats'][_0x5b0e04][_0x44b6b3(0x15a)]=Date[_0x44b6b3(0x14a)](),saveDB();},'updateLeaveCount':async _0x4fe181=>{const _0x592c2a=a41_0x30f847;!db['user_stats'][_0x4fe181]&&(db[_0x592c2a(0x165)][_0x4fe181]={'messages_sent':0x0,'voice_time':0x0,'joins':0x0,'leaves':0x0}),db[_0x592c2a(0x165)][_0x4fe181][_0x592c2a(0x158)]++,db['user_stats'][_0x4fe181][_0x592c2a(0x15a)]=Date['now'](),saveDB();},'getAllStats':async()=>{const _0x1878a3=a41_0x30f847;return Object['entries'](db[_0x1878a3(0x165)])[_0x1878a3(0x148)](([_0x5a1ebf,_0x449b56])=>({'user_id':_0x5a1ebf,..._0x449b56}))[_0x1878a3(0x14e)]((_0x21eb56,_0x2c79dd)=>(_0x2c79dd[_0x1878a3(0x176)]||0x0)-(_0x21eb56[_0x1878a3(0x176)]||0x0));},'addModerationLog':async(_0x397387,_0x88316f,_0x503a7b,_0xbae534,_0x50336c=null)=>{const _0x3d54d3=a41_0x30f847;db[_0x3d54d3(0x153)][_0x3d54d3(0x16d)]({'id':db['moderation_logs'][_0x3d54d3(0x15d)]+0x1,'type':_0x397387,'moderator_id':_0x88316f,'target_id':_0x503a7b,'reason':_0xbae534,'timestamp':Date[_0x3d54d3(0x14a)](),'duration':_0x50336c}),saveDB();},'getModerationLogs':async()=>{const _0x35f302=a41_0x30f847;return db[_0x35f302(0x153)];},'clearModerationLogs':async()=>{db['moderation_logs']=[],saveDB();},'addPunishment':async(_0x4be191,_0x4dcbbf,_0x2880f4,_0x4c8d03,_0x394b63=null)=>{db['punishments'][_0x4be191]={'type':_0x4dcbbf,'moderator_id':_0x2880f4,'reason':_0x4c8d03,'timestamp':Date['now'](),'expires_at':_0x394b63},saveDB();},'removePunishment':async _0x470357=>{const _0x11154e=a41_0x30f847;delete db[_0x11154e(0x147)][_0x470357],saveDB();},'getPunishment':async _0x2f6e54=>{const _0x54c1eb=a41_0x30f847;return db[_0x54c1eb(0x147)][_0x2f6e54];},'createTicket':async(_0xa5c284,_0x5099a8,_0x21ec06=a41_0x30f847(0x16c))=>{const _0x1a7000=a41_0x30f847;db[_0x1a7000(0x169)][_0xa5c284]={'channel_id':_0xa5c284,'user_id':_0x5099a8,'category':_0x21ec06,'created_at':Date[_0x1a7000(0x14a)](),'status':_0x1a7000(0x166),'claimed_by':null},saveDB();},'closeTicket':async _0x1caed6=>{const _0x11c9b5=a41_0x30f847;db[_0x11c9b5(0x169)][_0x1caed6]&&(db['tickets'][_0x1caed6]['closed_at']=Date[_0x11c9b5(0x14a)](),db[_0x11c9b5(0x169)][_0x1caed6][_0x11c9b5(0x154)]=_0x11c9b5(0x173),saveDB());},'getTicket':async _0x320594=>{const _0x304b00=a41_0x30f847;return db[_0x304b00(0x169)][_0x320594];},'getUserActiveTicket':async _0x35ff17=>{const _0x5c01f6=a41_0x30f847,_0x1d93ce=Object[_0x5c01f6(0x163)](db[_0x5c01f6(0x169)]);return _0x1d93ce[_0x5c01f6(0x160)](_0x1f79a5=>_0x1f79a5[_0x5c01f6(0x168)]===_0x35ff17&&_0x1f79a5[_0x5c01f6(0x154)]==='open');},'claimTicket':async(_0x545f73,_0x30e1f1)=>{const _0x5242f7=a41_0x30f847;db['tickets'][_0x545f73]&&(db[_0x5242f7(0x169)][_0x545f73][_0x5242f7(0x155)]=_0x30e1f1,db['tickets'][_0x545f73][_0x5242f7(0x154)]=_0x5242f7(0x175),saveDB());}};