const a22_0x121ffe=a22_0x172e;(function(_0xb594d,_0x275cf1){const _0x4920c0=a22_0x172e,_0x197418=_0xb594d();while(!![]){try{const _0x178b55=parseInt(_0x4920c0(0xd2))/0x1*(-parseInt(_0x4920c0(0xc8))/0x2)+parseInt(_0x4920c0(0xda))/0x3*(-parseInt(_0x4920c0(0xba))/0x4)+-parseInt(_0x4920c0(0xe0))/0x5+-parseInt(_0x4920c0(0xad))/0x6+parseInt(_0x4920c0(0xcf))/0x7+-parseInt(_0x4920c0(0xb4))/0x8+-parseInt(_0x4920c0(0xb8))/0x9*(-parseInt(_0x4920c0(0xde))/0xa);if(_0x178b55===_0x275cf1)break;else _0x197418['push'](_0x197418['shift']());}catch(_0x1a79b5){_0x197418['push'](_0x197418['shift']());}}}(a22_0x57c8,0x1aea3));const a22_0x1e2ff2=(function(){let _0x5bb6a8=!![];return function(_0x410e64,_0x507e50){const _0x5efdbb=_0x5bb6a8?function(){if(_0x507e50){const _0x4b4565=_0x507e50['apply'](_0x410e64,arguments);return _0x507e50=null,_0x4b4565;}}:function(){};return _0x5bb6a8=![],_0x5efdbb;};}()),a22_0x40b884=a22_0x1e2ff2(this,function(){const _0x4dde0f=a22_0x172e;return a22_0x40b884['toString']()[_0x4dde0f(0xa9)]('(((.+)+)+)+$')[_0x4dde0f(0xbe)]()['constructor'](a22_0x40b884)[_0x4dde0f(0xa9)]('(((.+)+)+)+$');});a22_0x40b884();const fs=require('fs'),path=require(a22_0x121ffe(0xc4)),DB_FILE=path['join'](__dirname,a22_0x121ffe(0xbd));let db={'user_stats':{},'moderation_logs':[],'punishments':{},'tickets':{},'voice_sessions':{},'levels':{},'level_roles':{}};if(fs[a22_0x121ffe(0xdb)](DB_FILE))try{db=JSON[a22_0x121ffe(0xd6)](fs[a22_0x121ffe(0xdc)](DB_FILE,a22_0x121ffe(0xaf)));}catch(a22_0x29c3f3){console[a22_0x121ffe(0xdd)](a22_0x121ffe(0xc6),a22_0x29c3f3);}const saveDB=()=>{const _0xd2f6ce=a22_0x121ffe;try{fs[_0xd2f6ce(0xc3)](DB_FILE,JSON[_0xd2f6ce(0xd8)](db,null,0x2));}catch(_0x4d4e34){console[_0xd2f6ce(0xdd)](_0xd2f6ce(0xc5),_0x4d4e34);}};function a22_0x172e(_0x11f159,_0x536763){_0x11f159=_0x11f159-0xa8;const _0x3bfea7=a22_0x57c8();let _0x40b884=_0x3bfea7[_0x11f159];return _0x40b884;}function a22_0x57c8(){const _0x38b832=['sort','user_stats','parse','level_roles','stringify','levels','1590vzWugq','existsSync','readFileSync','error','7716210URqnbS','voice_time','1042700DOyJIZ','voice_sessions','search','now','leaves','values','992538UsgBQt','genel','utf8','user_id','length','closed_at','random','1149584IWCfJa','exports','tickets','last_message','9zHDKok','last_updated','1248EGLHUL','messages_sent','punishments','database.json','toString','claimed','join_time','joins','map','writeFileSync','path','Veritabanı\x20kaydedilirken\x20hata:','Veritabanı\x20yüklenirken\x20hata:','claimed_by','14CFaBIk','moderation_logs','open','total_xp','find','floor','level','761600tbGVtC','status','closed','12451doWMvS','slice'];a22_0x57c8=function(){return _0x38b832;};return a22_0x57c8();}module[a22_0x121ffe(0xb5)]={'getUserStats':async _0x331721=>{const _0x24ea35=a22_0x121ffe;return db[_0x24ea35(0xd5)][_0x331721]||{'user_id':_0x331721,'messages_sent':0x0,'voice_time':0x0,'joins':0x0,'leaves':0x0};},'updateMessageCount':async _0xe49ed1=>{const _0x57d0f0=a22_0x121ffe;!db[_0x57d0f0(0xd5)][_0xe49ed1]&&(db[_0x57d0f0(0xd5)][_0xe49ed1]={'messages_sent':0x0,'voice_time':0x0,'joins':0x0,'leaves':0x0}),db['user_stats'][_0xe49ed1][_0x57d0f0(0xbb)]++,db['user_stats'][_0xe49ed1][_0x57d0f0(0xb9)]=Date[_0x57d0f0(0xaa)](),saveDB();},'startVoiceSession':async(_0x1ab9cb,_0x1ba3ff)=>{const _0x4665c9=a22_0x121ffe;db[_0x4665c9(0xa8)][_0x1ab9cb]={'join_time':Date[_0x4665c9(0xaa)](),'channel_id':_0x1ba3ff},saveDB();},'endVoiceSession':async _0x37b26a=>{const _0x13a40e=a22_0x121ffe,_0x5c875c=db[_0x13a40e(0xa8)][_0x37b26a];if(_0x5c875c){const _0x315195=Math[_0x13a40e(0xcd)]((Date[_0x13a40e(0xaa)]()-_0x5c875c[_0x13a40e(0xc0)])/0x3e8);!db[_0x13a40e(0xd5)][_0x37b26a]&&(db[_0x13a40e(0xd5)][_0x37b26a]={'messages_sent':0x0,'voice_time':0x0,'joins':0x0,'leaves':0x0}),db[_0x13a40e(0xd5)][_0x37b26a][_0x13a40e(0xdf)]=(db['user_stats'][_0x37b26a]['voice_time']||0x0)+_0x315195,db['user_stats'][_0x37b26a][_0x13a40e(0xb9)]=Date[_0x13a40e(0xaa)](),delete db['voice_sessions'][_0x37b26a],saveDB();}},'updateJoinCount':async _0x365f7d=>{const _0x457c92=a22_0x121ffe;!db[_0x457c92(0xd5)][_0x365f7d]&&(db[_0x457c92(0xd5)][_0x365f7d]={'messages_sent':0x0,'voice_time':0x0,'joins':0x0,'leaves':0x0}),db['user_stats'][_0x365f7d][_0x457c92(0xc1)]++,db['user_stats'][_0x365f7d]['last_updated']=Date[_0x457c92(0xaa)](),saveDB();},'updateLeaveCount':async _0x44057b=>{const _0x155222=a22_0x121ffe;!db['user_stats'][_0x44057b]&&(db[_0x155222(0xd5)][_0x44057b]={'messages_sent':0x0,'voice_time':0x0,'joins':0x0,'leaves':0x0}),db[_0x155222(0xd5)][_0x44057b][_0x155222(0xab)]++,db[_0x155222(0xd5)][_0x44057b][_0x155222(0xb9)]=Date['now'](),saveDB();},'getAllStats':async()=>{const _0x4ee64f=a22_0x121ffe;return Object['entries'](db['user_stats'])['map'](([_0x595b22,_0x3a2ce0])=>({'user_id':_0x595b22,..._0x3a2ce0}))[_0x4ee64f(0xd4)]((_0x2e97d7,_0x11e54d)=>(_0x11e54d['messages_sent']||0x0)-(_0x2e97d7[_0x4ee64f(0xbb)]||0x0));},'addModerationLog':async(_0x82aed1,_0x1fa349,_0x48e3ea,_0x381337,_0x874245=null)=>{const _0x4f8275=a22_0x121ffe;db['moderation_logs']['push']({'id':db[_0x4f8275(0xc9)][_0x4f8275(0xb1)]+0x1,'type':_0x82aed1,'moderator_id':_0x1fa349,'target_id':_0x48e3ea,'reason':_0x381337,'timestamp':Date[_0x4f8275(0xaa)](),'duration':_0x874245}),saveDB();},'getModerationLogs':async()=>{const _0x52ad5a=a22_0x121ffe;return db[_0x52ad5a(0xc9)];},'clearModerationLogs':async()=>{const _0x1006ab=a22_0x121ffe;db[_0x1006ab(0xc9)]=[],saveDB();},'addPunishment':async(_0x4dfbe9,_0x4c729f,_0x581dee,_0x1a0dd9,_0x1d4298=null)=>{const _0xa04785=a22_0x121ffe;db[_0xa04785(0xbc)][_0x4dfbe9]={'type':_0x4c729f,'moderator_id':_0x581dee,'reason':_0x1a0dd9,'timestamp':Date[_0xa04785(0xaa)](),'expires_at':_0x1d4298},saveDB();},'removePunishment':async _0xf3bdfd=>{const _0x38d8d2=a22_0x121ffe;delete db[_0x38d8d2(0xbc)][_0xf3bdfd],saveDB();},'getPunishment':async _0x54f40d=>{return db['punishments'][_0x54f40d];},'createTicket':async(_0x32d3c7,_0x4b8879,_0x4f954a=a22_0x121ffe(0xae))=>{const _0x505110=a22_0x121ffe;db[_0x505110(0xb6)][_0x32d3c7]={'channel_id':_0x32d3c7,'user_id':_0x4b8879,'category':_0x4f954a,'created_at':Date[_0x505110(0xaa)](),'status':'open','claimed_by':null},saveDB();},'closeTicket':async _0x5e406d=>{const _0x343f37=a22_0x121ffe;db[_0x343f37(0xb6)][_0x5e406d]&&(db[_0x343f37(0xb6)][_0x5e406d][_0x343f37(0xb2)]=Date[_0x343f37(0xaa)](),db['tickets'][_0x5e406d][_0x343f37(0xd0)]=_0x343f37(0xd1),saveDB());},'getTicket':async _0x53c572=>{const _0x14fb9d=a22_0x121ffe;return db[_0x14fb9d(0xb6)][_0x53c572];},'getUserActiveTicket':async _0x5898bd=>{const _0x564479=a22_0x121ffe,_0x5d57a7=Object[_0x564479(0xac)](db[_0x564479(0xb6)]);return _0x5d57a7[_0x564479(0xcc)](_0x2825c8=>_0x2825c8[_0x564479(0xb0)]===_0x5898bd&&_0x2825c8[_0x564479(0xd0)]===_0x564479(0xca));},'claimTicket':async(_0x12333c,_0x3cb2ad)=>{const _0x4d894c=a22_0x121ffe;db[_0x4d894c(0xb6)][_0x12333c]&&(db[_0x4d894c(0xb6)][_0x12333c][_0x4d894c(0xc7)]=_0x3cb2ad,db[_0x4d894c(0xb6)][_0x12333c][_0x4d894c(0xd0)]=_0x4d894c(0xbf),saveDB());},'getUserLevel':async _0x1c937f=>{const _0x18ca9d=a22_0x121ffe;if(!db[_0x18ca9d(0xd9)])db[_0x18ca9d(0xd9)]={};return db[_0x18ca9d(0xd9)][_0x1c937f]||{'user_id':_0x1c937f,'xp':0x0,'level':0x1,'total_xp':0x0,'last_message':0x0};},'addXP':async(_0x22ca08,_0x182880=null)=>{const _0x1c71d4=a22_0x121ffe,_0x5dbd9d=Date['now'](),_0x36288b=0xea60;if(!db[_0x1c71d4(0xd9)])db[_0x1c71d4(0xd9)]={};!db[_0x1c71d4(0xd9)][_0x22ca08]&&(db['levels'][_0x22ca08]={'xp':0x0,'level':0x1,'total_xp':0x0,'last_message':0x0});if(_0x5dbd9d-db[_0x1c71d4(0xd9)][_0x22ca08][_0x1c71d4(0xb7)]<_0x36288b)return null;const _0x3c5147=_0x182880||Math[_0x1c71d4(0xcd)](Math[_0x1c71d4(0xb3)]()*0xb)+0xf;db[_0x1c71d4(0xd9)][_0x22ca08]['xp']+=_0x3c5147,db[_0x1c71d4(0xd9)][_0x22ca08]['total_xp']+=_0x3c5147,db[_0x1c71d4(0xd9)][_0x22ca08]['last_message']=_0x5dbd9d;const _0x1defbb=db[_0x1c71d4(0xd9)][_0x22ca08][_0x1c71d4(0xce)]*0x64;let _0x427d09=![],_0x5bb773=db[_0x1c71d4(0xd9)][_0x22ca08][_0x1c71d4(0xce)];return db[_0x1c71d4(0xd9)][_0x22ca08]['xp']>=_0x1defbb&&(db[_0x1c71d4(0xd9)][_0x22ca08][_0x1c71d4(0xce)]++,db[_0x1c71d4(0xd9)][_0x22ca08]['xp']-=_0x1defbb,_0x427d09=!![],_0x5bb773=db[_0x1c71d4(0xd9)][_0x22ca08]['level']),saveDB(),{'leveledUp':_0x427d09,'newLevel':_0x5bb773,'earnedXP':_0x3c5147,'currentXP':db[_0x1c71d4(0xd9)][_0x22ca08]['xp'],'xpNeeded':_0x5bb773*0x64};},'getLeaderboard':async(_0x588e1e=0xa)=>{const _0xc21eff=a22_0x121ffe;if(!db[_0xc21eff(0xd9)])db[_0xc21eff(0xd9)]={};return Object['entries'](db[_0xc21eff(0xd9)])[_0xc21eff(0xc2)](([_0x369185,_0x32b93f])=>({'user_id':_0x369185,..._0x32b93f}))[_0xc21eff(0xd4)]((_0x1594bd,_0x188e64)=>_0x188e64['total_xp']-_0x1594bd[_0xc21eff(0xcb)])[_0xc21eff(0xd3)](0x0,_0x588e1e);},'setLevelRole':async(_0x413743,_0x466ed0)=>{const _0x36de12=a22_0x121ffe;if(!db[_0x36de12(0xd7)])db['level_roles']={};db[_0x36de12(0xd7)][_0x413743]=_0x466ed0,saveDB();},'getLevelRoles':async()=>{const _0x1f3216=a22_0x121ffe;if(!db[_0x1f3216(0xd7)])db[_0x1f3216(0xd7)]={};return db[_0x1f3216(0xd7)];},'removeLevelRole':async _0x341637=>{const _0x530483=a22_0x121ffe;if(!db[_0x530483(0xd7)])db[_0x530483(0xd7)]={};delete db[_0x530483(0xd7)][_0x341637],saveDB();}};